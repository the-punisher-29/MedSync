{"ast":null,"code":"function _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n    return target;\n  };\n  return _extends.apply(this, arguments);\n}\nimport { walkObject } from \"@chakra-ui/utils\";\nimport { calc } from \"./calc\";\nimport { cssVar } from \"./css-var\";\nexport function createThemeVars(target, options) {\n  var context = {\n    cssMap: {},\n    cssVars: {}\n  };\n  walkObject(target, (value, path) => {\n    var _tokenHandlerMap$firs;\n\n    // firstKey will be e.g. \"space\"\n    var [firstKey] = path;\n    var handler = (_tokenHandlerMap$firs = tokenHandlerMap[firstKey]) != null ? _tokenHandlerMap$firs : tokenHandlerMap.defaultHandler;\n    var {\n      cssVars,\n      cssMap\n    } = handler(path, value, options);\n    Object.assign(context.cssVars, cssVars);\n    Object.assign(context.cssMap, cssMap);\n  });\n  return context;\n}\n\n/**\n * Define transformation handlers for ThemeScale\n */\nvar tokenHandlerMap = {\n  space: (keys, value, options) => {\n    var properties = tokenHandlerMap.defaultHandler(keys, value, options);\n    var [firstKey, ...referenceKeys] = keys;\n    var negativeLookupKey = firstKey + \".-\" + referenceKeys.join(\".\");\n    var negativeVarKey = keys.join(\"-\");\n    var {\n      variable,\n      reference\n    } = cssVar(negativeVarKey, undefined, options.cssVarPrefix);\n    var negativeValue = calc.negate(value);\n    var varRef = calc.negate(reference);\n    return {\n      cssVars: properties.cssVars,\n      cssMap: _extends({}, properties.cssMap, {\n        [negativeLookupKey]: {\n          value: \"\" + negativeValue,\n          var: \"\" + variable,\n          varRef\n        }\n      })\n    };\n  },\n  defaultHandler: (keys, value, options) => {\n    var lookupKey = keys.join(\".\");\n    var varKey = keys.join(\"-\");\n    var {\n      variable,\n      reference\n    } = cssVar(varKey, undefined, options.cssVarPrefix);\n    return {\n      cssVars: {\n        [variable]: value\n      },\n      cssMap: {\n        [lookupKey]: {\n          value,\n          var: variable,\n          varRef: reference\n        }\n      }\n    };\n  }\n};","map":{"version":3,"sources":["../../../src/create-theme-vars/create-theme-vars.ts"],"names":["walkObject","calc","cssVar","createThemeVars","target","options","context","cssMap","cssVars","value","path","firstKey","handler","tokenHandlerMap","defaultHandler","Object","assign","space","keys","properties","referenceKeys","negativeLookupKey","join","negativeVarKey","variable","reference","undefined","cssVarPrefix","negativeValue","negate","varRef","var","lookupKey","varKey"],"mappings":"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","sourcesContent":["import { Dict, walkObject } from \"@chakra-ui/utils\"\nimport { ThemeScale } from \"./theme-tokens\"\nimport { calc, Operand } from \"./calc\"\nimport { cssVar } from \"./css-var\"\n\nexport interface CreateThemeVarsOptions {\n  cssVarPrefix?: string\n}\n\nexport interface ThemeVars {\n  cssVars: Dict\n  cssMap: Dict\n}\n\nexport function createThemeVars(target: Dict, options: CreateThemeVarsOptions) {\n  const context: ThemeVars = {\n    cssMap: {},\n    cssVars: {},\n  }\n\n  walkObject(target, (value, path) => {\n    // firstKey will be e.g. \"space\"\n    const [firstKey] = path\n\n    const handler = tokenHandlerMap[firstKey] ?? tokenHandlerMap.defaultHandler\n\n    const { cssVars, cssMap } = handler(path, value, options)\n    Object.assign(context.cssVars, cssVars)\n    Object.assign(context.cssMap, cssMap)\n  })\n\n  return context\n}\n\ntype TokenHandler = (\n  keys: string[],\n  value: unknown | { reference: string },\n  options: CreateThemeVarsOptions,\n) => ThemeVars\n\n/**\n * Define transformation handlers for ThemeScale\n */\nconst tokenHandlerMap: Partial<Record<ThemeScale, TokenHandler>> & {\n  defaultHandler: TokenHandler\n} = {\n  space: (keys, value, options) => {\n    const properties = tokenHandlerMap.defaultHandler(keys, value, options)\n    const [firstKey, ...referenceKeys] = keys\n\n    const negativeLookupKey = `${firstKey}.-${referenceKeys.join(\".\")}`\n    const negativeVarKey = keys.join(\"-\")\n    const { variable, reference } = cssVar(\n      negativeVarKey,\n      undefined,\n      options.cssVarPrefix,\n    )\n\n    const negativeValue = calc.negate(value as Operand)\n    const varRef = calc.negate(reference)\n\n    return {\n      cssVars: properties.cssVars,\n      cssMap: {\n        ...properties.cssMap,\n        [negativeLookupKey]: {\n          value: `${negativeValue}`,\n          var: `${variable}`,\n          varRef,\n        },\n      },\n    }\n  },\n  defaultHandler: (keys, value, options) => {\n    const lookupKey = keys.join(\".\")\n    const varKey = keys.join(\"-\")\n\n    const { variable, reference } = cssVar(\n      varKey,\n      undefined,\n      options.cssVarPrefix,\n    )\n\n    return {\n      cssVars: {\n        [variable]: value,\n      },\n      cssMap: {\n        [lookupKey]: {\n          value,\n          var: variable,\n          varRef: reference,\n        },\n      },\n    }\n  },\n}\n"]},"metadata":{},"sourceType":"module"}