{"ast":null,"code":"import { __DEV__ } from \"@chakra-ui/utils\";\nvar hasSupport = () => typeof Storage !== \"undefined\";\nexport var storageKey = \"chakra-ui-color-mode\";\n\n/**\n * Simple object to handle read-write to localStorage\n */\nexport var localStorageManager = {\n  get(init) {\n    if (!hasSupport()) return init;\n    try {\n      var _value = localStorage.getItem(storageKey);\n      return _value != null ? _value : init;\n    } catch (error) {\n      if (__DEV__) {\n        console.log(error);\n      }\n      return init;\n    }\n  },\n  set(value) {\n    if (!hasSupport()) return;\n    try {\n      localStorage.setItem(storageKey, value);\n    } catch (error) {\n      if (__DEV__) {\n        console.log(error);\n      }\n    }\n  },\n  type: \"localStorage\"\n};\n/**\n * Simple object to handle read-write to cookies\n */\n\nexport var cookieStorageManager = function cookieStorageManager(cookies) {\n  if (cookies === void 0) {\n    cookies = \"\";\n  }\n  return {\n    get(init) {\n      var match = cookies.match(new RegExp(\"(^| )\" + storageKey + \"=([^;]+)\"));\n      if (match) {\n        return match[2];\n      }\n      return init;\n    },\n    set(value) {\n      document.cookie = storageKey + \"=\" + value + \"; max-age=31536000; path=/\";\n    },\n    type: \"cookie\"\n  };\n};","map":{"version":3,"sources":["../../src/storage-manager.ts"],"names":["__DEV__","hasSupport","Storage","storageKey","localStorageManager","get","init","value","localStorage","getItem","error","console","log","set","setItem","type","cookieStorageManager","cookies","match","RegExp","document","cookie"],"mappings":"AAAA,SAASA,OAAT,QAAwB,kBAAxB;AAGA,IAAMC,UAAU,GAAG,CAAA,KAAM,OAAOC,OAAP,KAAmB,WAA5C;AACA,OAAO,IAAMC,UAAU,GAAG,sBAAnB;;AAUP;AACA;AACA;AACA,OAAO,IAAMC,mBAAmC,GAAG;EACjDC,GAAG,CAACC,IAAD,EAAQ;IACT,IAAI,CAACL,UAAU,CAAA,CAAf,EAAmB,OAAOK,IAAP;IACnB,IAAI;MACF,IAAMC,MAAK,GAAGC,YAAY,CAACC,OAAbD,CAAqBL,UAArBK,CAAd;MACA,OAAOD,MAAP,IAAA,IAAA,GAAOA,MAAP,GAAgBD,IAAhB;IACD,CAHD,CAGE,OAAOI,KAAP,EAAc;MACd,IAAIV,OAAJ,EAAa;QACXW,OAAO,CAACC,GAARD,CAAYD,KAAZC,CAAAA;MACD;MACD,OAAOL,IAAP;IACD;EACF,CAZgD;EAajDO,GAAG,CAACN,KAAD,EAAQ;IACT,IAAI,CAACN,UAAU,CAAA,CAAf,EAAmB;IACnB,IAAI;MACHO,YAAY,CAACM,OAAbN,CAAqBL,UAArBK,EAAiCD,KAAjCC,CAAAA;IACA,CAFD,CAEE,OAAOE,KAAP,EAAc;MACd,IAAIV,OAAJ,EAAa;QACXW,OAAO,CAACC,GAARD,CAAYD,KAAZC,CAAAA;MACD;IACF;EACF,CAtBgD;EAuBjDI,IAAI,EAAE;AAvB2C,CAA5C;AA0BP;AACA;AACA;;AACA,OAAO,IAAMC,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,OAAD,EAAA;EAAA,IAACA,OAAD,KAAA,KAAA,CAAA,EAAA;IAACA,OAAD,GAAW,EAAX;EAAA;EAAA,OAAmC;IACrEZ,GAAG,CAACC,IAAD,EAAQ;MACT,IAAMY,KAAK,GAAGD,OAAO,CAACC,KAARD,CAAc,IAAIE,MAAJ,CAAA,OAAA,GAAmBhB,UAAnB,GAAA,UAAA,CAAdc,CAAd;MAEA,IAAIC,KAAJ,EAAW;QACT,OAAOA,KAAK,CAAC,CAAD,CAAZ;MACD;MAED,OAAOZ,IAAP;IACD,CAToE;IAUrEO,GAAG,CAACN,KAAD,EAAQ;MACTa,QAAQ,CAACC,MAATD,GAAqBjB,UAArBiB,GAAAA,GAAAA,GAAmCb,KAAnCa,GAAAA,4BAAAA;IACD,CAZoE;IAarEL,IAAI,EAAE;EAb+D,CAAnC;AAAA,CAA7B","sourcesContent":["import { __DEV__ } from \"@chakra-ui/utils\"\nimport { ColorMode } from \"./color-mode.utils\"\n\nconst hasSupport = () => typeof Storage !== \"undefined\"\nexport const storageKey = \"chakra-ui-color-mode\"\n\ntype MaybeColorMode = ColorMode | undefined\n\nexport interface StorageManager {\n  get(init?: ColorMode): MaybeColorMode\n  set(value: ColorMode): void\n  type: \"cookie\" | \"localStorage\"\n}\n\n/**\n * Simple object to handle read-write to localStorage\n */\nexport const localStorageManager: StorageManager = {\n  get(init?) {\n    if (!hasSupport()) return init\n    try {\n      const value = localStorage.getItem(storageKey) as MaybeColorMode\n      return value ?? init\n    } catch (error) {\n      if (__DEV__) {\n        console.log(error)\n      }\n      return init\n    }\n  },\n  set(value) {\n    if (!hasSupport()) return\n    try {\n     localStorage.setItem(storageKey, value)\n    } catch (error) {\n      if (__DEV__) {\n        console.log(error)\n      }\n    }\n  },\n  type: \"localStorage\",\n}\n\n/**\n * Simple object to handle read-write to cookies\n */\nexport const cookieStorageManager = (cookies = \"\"): StorageManager => ({\n  get(init?) {\n    const match = cookies.match(new RegExp(`(^| )${storageKey}=([^;]+)`))\n\n    if (match) {\n      return match[2] as ColorMode\n    }\n\n    return init\n  },\n  set(value) {\n    document.cookie = `${storageKey}=${value}; max-age=31536000; path=/`\n  },\n  type: \"cookie\",\n})\n"]},"metadata":{},"sourceType":"module"}