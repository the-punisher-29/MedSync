{"ast":null,"code":"/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__ } from \"./assertion\";\nexport function runIfFn(valueOrFn) {\n  for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    args[_key - 1] = arguments[_key];\n  }\n  return isFunction(valueOrFn) ? valueOrFn(...args) : valueOrFn;\n}\nexport function callAllHandlers() {\n  for (var _len2 = arguments.length, fns = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n    fns[_key2] = arguments[_key2];\n  }\n  return function func(event) {\n    fns.some(fn => {\n      fn == null ? void 0 : fn(event);\n      return event == null ? void 0 : event.defaultPrevented;\n    });\n  };\n}\nexport function callAll() {\n  for (var _len3 = arguments.length, fns = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n    fns[_key3] = arguments[_key3];\n  }\n  return function mergedFn(arg) {\n    fns.forEach(fn => {\n      fn == null ? void 0 : fn(arg);\n    });\n  };\n}\nexport var compose = function compose(fn1) {\n  for (var _len4 = arguments.length, fns = new Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n    fns[_key4 - 1] = arguments[_key4];\n  }\n  return fns.reduce((f1, f2) => function () {\n    return f1(f2(...arguments));\n  }, fn1);\n};\nexport function once(fn) {\n  var result;\n  return function func() {\n    if (fn) {\n      for (var _len5 = arguments.length, args = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n        args[_key5] = arguments[_key5];\n      }\n      result = fn.apply(this, args);\n      fn = null;\n    }\n    return result;\n  };\n}\nexport var noop = () => {};\nexport var warn = once(options => () => {\n  var {\n    condition,\n    message\n  } = options;\n  if (condition && __DEV__) {\n    console.warn(message);\n  }\n});\nexport var error = once(options => () => {\n  var {\n    condition,\n    message\n  } = options;\n  if (condition && __DEV__) {\n    console.error(message);\n  }\n});\nexport var pipe = function pipe() {\n  for (var _len6 = arguments.length, fns = new Array(_len6), _key6 = 0; _key6 < _len6; _key6++) {\n    fns[_key6] = arguments[_key6];\n  }\n  return v => fns.reduce((a, b) => b(a), v);\n};\nvar distance1D = (a, b) => Math.abs(a - b);\nvar isPoint = point => \"x\" in point && \"y\" in point;\nexport function distance(a, b) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b);\n  }\n  if (isPoint(a) && isPoint(b)) {\n    var xDelta = distance1D(a.x, b.x);\n    var yDelta = distance1D(a.y, b.y);\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2);\n  }\n  return 0;\n}","map":{"version":3,"sources":["../../src/function.ts"],"names":["isFunction","isNumber","__DEV__","runIfFn","valueOrFn","args","callAllHandlers","fns","func","event","some","fn","defaultPrevented","callAll","mergedFn","arg","forEach","compose","fn1","reduce","f1","f2","once","result","apply","noop","warn","options","condition","message","console","error","pipe","v","a","b","distance1D","Math","abs","isPoint","point","distance","xDelta","x","yDelta","y","sqrt"],"mappings":"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","sourcesContent":["/* eslint-disable no-nested-ternary */\nimport { isFunction, isNumber, __DEV__ } from \"./assertion\"\nimport { AnyFunction, FunctionArguments } from \"./types\"\n\nexport function runIfFn<T, U>(\n  valueOrFn: T | ((...fnArgs: U[]) => T),\n  ...args: U[]\n): T {\n  return isFunction(valueOrFn) ? valueOrFn(...args) : valueOrFn\n}\n\nexport function callAllHandlers<T extends (event: any) => void>(\n  ...fns: (T | undefined)[]\n) {\n  return function func(event: FunctionArguments<T>[0]) {\n    fns.some((fn) => {\n      fn?.(event)\n      return event?.defaultPrevented\n    })\n  }\n}\n\nexport function callAll<T extends AnyFunction>(...fns: (T | undefined)[]) {\n  return function mergedFn(arg: FunctionArguments<T>[0]) {\n    fns.forEach((fn) => {\n      fn?.(arg)\n    })\n  }\n}\n\nexport const compose = <T>(\n  fn1: (...args: T[]) => T,\n  ...fns: Array<(...args: T[]) => T>\n) => fns.reduce((f1, f2) => (...args) => f1(f2(...args)), fn1)\n\nexport function once<T extends AnyFunction>(fn?: T | null) {\n  let result: any\n\n  return function func(this: any, ...args: Parameters<T>) {\n    if (fn) {\n      result = fn.apply(this, args)\n      fn = null\n    }\n\n    return result\n  }\n}\n\nexport const noop = () => {}\n\ntype MessageOptions = {\n  condition: boolean\n  message: string\n}\n\nexport const warn = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.warn(message)\n  }\n})\n\nexport const error = once((options: MessageOptions) => () => {\n  const { condition, message } = options\n  if (condition && __DEV__) {\n    console.error(message)\n  }\n})\n\nexport const pipe = <R>(...fns: Array<(a: R) => R>) => (v: R) =>\n  fns.reduce((a, b) => b(a), v)\n\nconst distance1D = (a: number, b: number) => Math.abs(a - b)\ntype Point = { x: number; y: number }\n\nconst isPoint = (point: any): point is { x: number; y: number } =>\n  \"x\" in point && \"y\" in point\n\nexport function distance<P extends Point | number>(a: P, b: P) {\n  if (isNumber(a) && isNumber(b)) {\n    return distance1D(a, b)\n  }\n  if (isPoint(a) && isPoint(b)) {\n    const xDelta = distance1D(a.x, b.x)\n    const yDelta = distance1D(a.y, b.y)\n    return Math.sqrt(xDelta ** 2 + yDelta ** 2)\n  }\n  return 0\n}\n"]},"metadata":{},"sourceType":"module"}