{"ast":null,"code":"// import React, { useState, useEffect } from 'react';\n// import { useHistory } from 'react-router-dom';\n// import { getFirestore, doc, setDoc, getDoc } from 'firebase/firestore';\n// import { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\n// import { getAuth, updateProfile } from 'firebase/auth';\n// import useAuth from '../hooks/useAuth';\n\n// const allowedEmails = [\"b22es006@iitj.ac.in\", \"b22cs101@iitj.ac.in\", \"b22cs014@iitj.ac.in\"];\n\n// const ProfilePage = () => {\n//     const { user, setUser } = useAuth();\n//     const db = getFirestore();\n//     const storage = getStorage();\n//     const auth = getAuth();\n//     const history = useHistory();\n\n//     const [profileData, setProfileData] = useState({\n//         phone: '',\n//         bloodGroup: '',\n//         rollOrEmpId: '',\n//         age: '',\n//         medicalBio: '',\n//     });\n//     const [profilePic, setProfilePic] = useState(user.photoURL || \"https://cdn-icons-png.flaticon.com/512/236/236832.png\");\n//     const [imageFile, setImageFile] = useState(null);\n\n//     useEffect(() => {\n//         const fetchProfileData = async () => {\n//             if (user) {\n//                 const userDoc = doc(db, \"user_profile\", user.uid);\n//                 const docSnap = await getDoc(userDoc);\n//                 if (docSnap.exists()) {\n//                     setProfileData(docSnap.data());\n//                 }\n//             }\n//         };\n//         fetchProfileData();\n//     }, [user, db]);\n\n//     const handleChange = (e) => {\n//         const { name, value } = e.target;\n//         setProfileData(prev => ({ ...prev, [name]: value }));\n//     };\n\n//     const handleImageChange = (e) => {\n//         if (e.target.files[0]) {\n//             setImageFile(e.target.files[0]);\n//         }\n//     };\n\n//     const handleSave = async (e) => {\n//         e.preventDefault();\n//         if (user) {\n//             let imageUrl = profilePic;\n\n//             if (imageFile) {\n//                 const storageRef = ref(storage, `profile_pictures/${user.uid}`);\n//                 await uploadBytes(storageRef, imageFile);\n//                 imageUrl = await getDownloadURL(storageRef);\n\n//                 await updateProfile(auth.currentUser, { photoURL: imageUrl });\n//                 setProfilePic(imageUrl);\n//             }\n\n//             const userDoc = doc(db, \"user_profile\", user.uid);\n//             await setDoc(userDoc, {\n//                 name: user.displayName,\n//                 email: user.email,\n//                 photoURL: imageUrl,\n//                 ...profileData\n//             });\n\n//             alert(\"Profile updated successfully\");\n//         }\n//     };\n\n//     const handleAdminAccess = () => {\n//         history.push('/admin');\n//     };\n\n//     return (\n//         <div className=\"profile-page container mx-auto p-4 mt-20\">\n//             <header className=\"flex justify-between items-start mb-6\">\n//                 <h1 className=\"text-3xl font-bold\">Profile</h1>\n//                 <div>\n//                     <img\n//                         src={profilePic}\n//                         alt=\"Profile\"\n//                         className=\"w-20 h-20 rounded-full border mb-2\"\n//                     />\n//                     <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} className=\"mt-2\" />\n//                 </div>\n//             </header>\n\n//             {allowedEmails.map(email => email.toLowerCase()).includes(user.email?.toLowerCase()) && (\n//     <button \n//         onClick={handleAdminAccess}\n//         className=\"bg-green-500 text-white py-2 px-4 rounded-lg font-semibold hover:bg-green-600 mb-4\"\n//     >\n//         Admin Access\n//     </button>\n// )}\n\n//             <form onSubmit={handleSave} className=\"bg-white p-6 rounded-lg shadow-lg\">\n//                 <div className=\"grid grid-cols-1 gap-4 mb-6\">\n//                     <div>\n//                         <label className=\"font-semibold\">Name:</label>\n//                         <p>{user.displayName}</p>\n//                     </div>\n//                     <div>\n//                         <label className=\"font-semibold\">Email:</label>\n//                         <p>{user.email}</p>\n//                     </div>\n//                     <div>\n//                         <label className=\"font-semibold\">Phone Number:</label>\n//                         <input \n//                             type=\"text\"\n//                             name=\"phone\"\n//                             value={profileData.phone}\n//                             onChange={handleChange}\n//                             maxLength=\"10\"\n//                             className=\"w-full p-2 border rounded\"\n//                         />\n//                     </div>\n//                     <div>\n//                         <label className=\"font-semibold\">Blood Group:</label>\n//                         <input \n//                             type=\"text\"\n//                             name=\"bloodGroup\"\n//                             value={profileData.bloodGroup}\n//                             onChange={handleChange}\n//                             className=\"w-full p-2 border rounded\"\n//                         />\n//                     </div>\n//                     <div>\n//                         <label className=\"font-semibold\">Roll No/Emp ID:</label>\n//                         <input \n//                             type=\"text\"\n//                             name=\"rollOrEmpId\"\n//                             value={profileData.rollOrEmpId}\n//                             onChange={handleChange}\n//                             className=\"w-full p-2 border rounded\"\n//                         />\n//                     </div>\n//                     <div>\n//                         <label className=\"font-semibold\">Age:</label>\n//                         <input \n//                             type=\"number\"\n//                             name=\"age\"\n//                             value={profileData.age}\n//                             onChange={handleChange}\n//                             className=\"w-full p-2 border rounded\"\n//                         />\n//                     </div>\n//                     <div>\n//                         <label className=\"font-semibold\">Medical Bio:</label>\n//                         <textarea \n//                             name=\"medicalBio\"\n//                             value={profileData.medicalBio}\n//                             onChange={handleChange}\n//                             className=\"w-full p-2 border rounded\"\n//                         />\n//                     </div>\n//                 </div>\n\n//                 <div className=\"text-center\">\n//                     <button \n//                         type=\"submit\"\n//                         className=\"bg-blue-500 text-white py-2 px-6 rounded-lg font-semibold hover:bg-blue-600\"\n//                     >\n//                         Update Profile\n//                     </button>\n//                 </div>\n//             </form>\n//         </div>\n//     );\n// };\n\n// export default ProfilePage;\n// src/screens/AdminPage.js","map":{"version":3,"names":[],"sources":["E:/Pr/Web D/MedSync/src/screens/adminpage.js"],"sourcesContent":["// import React, { useState, useEffect } from 'react';\r\n// import { useHistory } from 'react-router-dom';\r\n// import { getFirestore, doc, setDoc, getDoc } from 'firebase/firestore';\r\n// import { getStorage, ref, uploadBytes, getDownloadURL } from 'firebase/storage';\r\n// import { getAuth, updateProfile } from 'firebase/auth';\r\n// import useAuth from '../hooks/useAuth';\r\n\r\n// const allowedEmails = [\"b22es006@iitj.ac.in\", \"b22cs101@iitj.ac.in\", \"b22cs014@iitj.ac.in\"];\r\n\r\n// const ProfilePage = () => {\r\n//     const { user, setUser } = useAuth();\r\n//     const db = getFirestore();\r\n//     const storage = getStorage();\r\n//     const auth = getAuth();\r\n//     const history = useHistory();\r\n    \r\n//     const [profileData, setProfileData] = useState({\r\n//         phone: '',\r\n//         bloodGroup: '',\r\n//         rollOrEmpId: '',\r\n//         age: '',\r\n//         medicalBio: '',\r\n//     });\r\n//     const [profilePic, setProfilePic] = useState(user.photoURL || \"https://cdn-icons-png.flaticon.com/512/236/236832.png\");\r\n//     const [imageFile, setImageFile] = useState(null);\r\n\r\n//     useEffect(() => {\r\n//         const fetchProfileData = async () => {\r\n//             if (user) {\r\n//                 const userDoc = doc(db, \"user_profile\", user.uid);\r\n//                 const docSnap = await getDoc(userDoc);\r\n//                 if (docSnap.exists()) {\r\n//                     setProfileData(docSnap.data());\r\n//                 }\r\n//             }\r\n//         };\r\n//         fetchProfileData();\r\n//     }, [user, db]);\r\n\r\n//     const handleChange = (e) => {\r\n//         const { name, value } = e.target;\r\n//         setProfileData(prev => ({ ...prev, [name]: value }));\r\n//     };\r\n\r\n//     const handleImageChange = (e) => {\r\n//         if (e.target.files[0]) {\r\n//             setImageFile(e.target.files[0]);\r\n//         }\r\n//     };\r\n\r\n//     const handleSave = async (e) => {\r\n//         e.preventDefault();\r\n//         if (user) {\r\n//             let imageUrl = profilePic;\r\n    \r\n//             if (imageFile) {\r\n//                 const storageRef = ref(storage, `profile_pictures/${user.uid}`);\r\n//                 await uploadBytes(storageRef, imageFile);\r\n//                 imageUrl = await getDownloadURL(storageRef);\r\n    \r\n//                 await updateProfile(auth.currentUser, { photoURL: imageUrl });\r\n//                 setProfilePic(imageUrl);\r\n//             }\r\n    \r\n//             const userDoc = doc(db, \"user_profile\", user.uid);\r\n//             await setDoc(userDoc, {\r\n//                 name: user.displayName,\r\n//                 email: user.email,\r\n//                 photoURL: imageUrl,\r\n//                 ...profileData\r\n//             });\r\n    \r\n//             alert(\"Profile updated successfully\");\r\n//         }\r\n//     };\r\n\r\n//     const handleAdminAccess = () => {\r\n//         history.push('/admin');\r\n//     };\r\n\r\n//     return (\r\n//         <div className=\"profile-page container mx-auto p-4 mt-20\">\r\n//             <header className=\"flex justify-between items-start mb-6\">\r\n//                 <h1 className=\"text-3xl font-bold\">Profile</h1>\r\n//                 <div>\r\n//                     <img\r\n//                         src={profilePic}\r\n//                         alt=\"Profile\"\r\n//                         className=\"w-20 h-20 rounded-full border mb-2\"\r\n//                     />\r\n//                     <input type=\"file\" accept=\"image/*\" onChange={handleImageChange} className=\"mt-2\" />\r\n//                 </div>\r\n//             </header>\r\n            \r\n//             {allowedEmails.map(email => email.toLowerCase()).includes(user.email?.toLowerCase()) && (\r\n//     <button \r\n//         onClick={handleAdminAccess}\r\n//         className=\"bg-green-500 text-white py-2 px-4 rounded-lg font-semibold hover:bg-green-600 mb-4\"\r\n//     >\r\n//         Admin Access\r\n//     </button>\r\n// )}\r\n\r\n\r\n//             <form onSubmit={handleSave} className=\"bg-white p-6 rounded-lg shadow-lg\">\r\n//                 <div className=\"grid grid-cols-1 gap-4 mb-6\">\r\n//                     <div>\r\n//                         <label className=\"font-semibold\">Name:</label>\r\n//                         <p>{user.displayName}</p>\r\n//                     </div>\r\n//                     <div>\r\n//                         <label className=\"font-semibold\">Email:</label>\r\n//                         <p>{user.email}</p>\r\n//                     </div>\r\n//                     <div>\r\n//                         <label className=\"font-semibold\">Phone Number:</label>\r\n//                         <input \r\n//                             type=\"text\"\r\n//                             name=\"phone\"\r\n//                             value={profileData.phone}\r\n//                             onChange={handleChange}\r\n//                             maxLength=\"10\"\r\n//                             className=\"w-full p-2 border rounded\"\r\n//                         />\r\n//                     </div>\r\n//                     <div>\r\n//                         <label className=\"font-semibold\">Blood Group:</label>\r\n//                         <input \r\n//                             type=\"text\"\r\n//                             name=\"bloodGroup\"\r\n//                             value={profileData.bloodGroup}\r\n//                             onChange={handleChange}\r\n//                             className=\"w-full p-2 border rounded\"\r\n//                         />\r\n//                     </div>\r\n//                     <div>\r\n//                         <label className=\"font-semibold\">Roll No/Emp ID:</label>\r\n//                         <input \r\n//                             type=\"text\"\r\n//                             name=\"rollOrEmpId\"\r\n//                             value={profileData.rollOrEmpId}\r\n//                             onChange={handleChange}\r\n//                             className=\"w-full p-2 border rounded\"\r\n//                         />\r\n//                     </div>\r\n//                     <div>\r\n//                         <label className=\"font-semibold\">Age:</label>\r\n//                         <input \r\n//                             type=\"number\"\r\n//                             name=\"age\"\r\n//                             value={profileData.age}\r\n//                             onChange={handleChange}\r\n//                             className=\"w-full p-2 border rounded\"\r\n//                         />\r\n//                     </div>\r\n//                     <div>\r\n//                         <label className=\"font-semibold\">Medical Bio:</label>\r\n//                         <textarea \r\n//                             name=\"medicalBio\"\r\n//                             value={profileData.medicalBio}\r\n//                             onChange={handleChange}\r\n//                             className=\"w-full p-2 border rounded\"\r\n//                         />\r\n//                     </div>\r\n//                 </div>\r\n                \r\n//                 <div className=\"text-center\">\r\n//                     <button \r\n//                         type=\"submit\"\r\n//                         className=\"bg-blue-500 text-white py-2 px-6 rounded-lg font-semibold hover:bg-blue-600\"\r\n//                     >\r\n//                         Update Profile\r\n//                     </button>\r\n//                 </div>\r\n//             </form>\r\n//         </div>\r\n//     );\r\n// };\r\n\r\n// export default ProfilePage;\r\n// src/screens/AdminPage.js\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","ignoreList":[]},"metadata":{},"sourceType":"module"}