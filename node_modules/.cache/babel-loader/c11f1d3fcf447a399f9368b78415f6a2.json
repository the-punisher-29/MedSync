{"ast":null,"code":"// This implementation is heavily inspired by react-aria's implementation\nimport * as React from \"react\";\nvar defaultIdContext = {\n  prefix: Math.round(Math.random() * 10000000000),\n  current: 0\n};\nvar IdContext = /*#__PURE__*/React.createContext(defaultIdContext);\nexport var IdProvider = /*#__PURE__*/React.memo(_ref => {\n  var {\n    children\n  } = _ref;\n  var currentContext = React.useContext(IdContext);\n  var isRoot = currentContext === defaultIdContext;\n  var context = React.useMemo(() => ({\n    prefix: isRoot ? 0 : ++currentContext.prefix,\n    current: 0\n  }), [isRoot, currentContext]);\n  return /*#__PURE__*/React.createElement(IdContext.Provider, {\n    value: context\n  }, children);\n});\nexport function useId(idProp, prefix) {\n  var context = React.useContext(IdContext);\n  return React.useMemo(() => idProp || [prefix, context.prefix, ++context.current].filter(Boolean).join(\"-\"),\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  [idProp, prefix]);\n}\n/**\n * Reack hook to generate ids for use in compound components\n *\n * @param idProp the external id passed from the user\n * @param prefixes array of prefixes to use\n *\n * @example\n *\n * ```js\n * const [buttonId, menuId] = useIds(\"52\", \"button\", \"menu\")\n *\n * // buttonId will be `button-52`\n * // menuId will be `menu-52`\n * ```\n */\n\nexport function useIds(idProp) {\n  for (var _len = arguments.length, prefixes = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    prefixes[_key - 1] = arguments[_key];\n  }\n  var id = useId(idProp);\n  return React.useMemo(() => {\n    return prefixes.map(prefix => prefix + \"-\" + id);\n  }, [id, prefixes]);\n}\n/**\n * Used to generate an id, and after render, check if that id is rendered so we know\n * if we can use it in places such as `aria-labelledby`.\n *\n * @param partId - The unique id for the component part\n *\n * @example\n * const { ref, id } = useOptionalPart<HTMLInputElement>(`${id}-label`)\n */\n\nexport function useOptionalPart(partId) {\n  var [id, setId] = React.useState(null);\n  var ref = React.useCallback(node => {\n    setId(node ? partId : null);\n  }, [partId]);\n  return {\n    ref,\n    id,\n    isRendered: Boolean(id)\n  };\n}","map":{"version":3,"sources":["../../src/use-id.ts"],"names":["React","defaultIdContext","prefix","Math","round","random","current","IdContext","createContext","IdProvider","memo","children","currentContext","useContext","isRoot","context","useMemo","createElement","Provider","value","useId","idProp","filter","Boolean","join","useIds","prefixes","id","map","useOptionalPart","partId","setId","useState","ref","useCallback","node","isRendered"],"mappings":"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","sourcesContent":["// This implementation is heavily inspired by react-aria's implementation\n\nimport * as React from \"react\"\n\ntype IdContextValue = {\n  prefix: number\n  current: number\n}\n\nconst defaultIdContext: IdContextValue = {\n  prefix: Math.round(Math.random() * 10000000000),\n  current: 0,\n}\n\nconst IdContext = React.createContext<IdContextValue>(defaultIdContext)\n\nexport const IdProvider: React.FC = React.memo(({ children }) => {\n  const currentContext = React.useContext(IdContext)\n  const isRoot = currentContext === defaultIdContext\n  const context: IdContextValue = React.useMemo(\n    () => ({\n      prefix: isRoot ? 0 : ++currentContext.prefix,\n      current: 0,\n    }),\n    [isRoot, currentContext],\n  )\n\n  return React.createElement(IdContext.Provider, { value: context }, children)\n})\n\nexport function useId(idProp?: string, prefix?: string): string {\n  const context = React.useContext(IdContext)\n  return React.useMemo(\n    () =>\n      idProp ||\n      [prefix, context.prefix, ++context.current].filter(Boolean).join(\"-\"),\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [idProp, prefix],\n  )\n}\n\n/**\n * Reack hook to generate ids for use in compound components\n *\n * @param idProp the external id passed from the user\n * @param prefixes array of prefixes to use\n *\n * @example\n *\n * ```js\n * const [buttonId, menuId] = useIds(\"52\", \"button\", \"menu\")\n *\n * // buttonId will be `button-52`\n * // menuId will be `menu-52`\n * ```\n */\nexport function useIds(idProp?: string, ...prefixes: string[]) {\n  const id = useId(idProp)\n  return React.useMemo(() => {\n    return prefixes.map((prefix) => `${prefix}-${id}`)\n  }, [id, prefixes])\n}\n\n/**\n * Used to generate an id, and after render, check if that id is rendered so we know\n * if we can use it in places such as `aria-labelledby`.\n *\n * @param partId - The unique id for the component part\n *\n * @example\n * const { ref, id } = useOptionalPart<HTMLInputElement>(`${id}-label`)\n */\nexport function useOptionalPart<T = any>(partId: string) {\n  const [id, setId] = React.useState<string | null>(null)\n  const ref = React.useCallback(\n    (node: T) => {\n      setId(node ? partId : null)\n    },\n    [partId],\n  )\n  return { ref, id, isRendered: Boolean(id) }\n}\n"]},"metadata":{},"sourceType":"module"}